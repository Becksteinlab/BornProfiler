

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>APBS calculations: Membrane simulations — bornprofiler.membrane &mdash; BornProfiler 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="BornProfiler 1.0.0 documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">BornProfiler 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <span class="target" id="module-bornprofiler.membrane"></span><div class="section" id="apbs-calculations-membrane-simulations-bornprofiler-membrane">
<h1>APBS calculations: Membrane simulations &#8212; <a class="reference internal" href="#module-bornprofiler.membrane" title="bornprofiler.membrane"><tt class="xref py py-mod docutils literal"><span class="pre">bornprofiler.membrane</span></tt></a><a class="headerlink" href="#apbs-calculations-membrane-simulations-bornprofiler-membrane" title="Permalink to this headline">¶</a></h1>
<p>Requires the <strong class="program">draw_membrane2a</strong> binary.</p>
<p>Uses <a href="#id1"><span class="problematic" id="id2">:programe:`draw_membrane2a`</span></a> to add a low-dielectric (eps=2) region and sets
protein dielectric to eps=10.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Paths to draw_membrane2a and apbs are set in the configuration file
<tt class="docutils literal"><span class="pre">~/.bornprofiler.cfg</span></tt>:</p>
<div class="last highlight-python"><pre>apbs = %(APBS)r
draw_membrane2 = %(DRAWMEMBRANE)r</pre>
</div>
</div>
<p>Commandline version of apbsmem, following
<a class="reference external" href="http://www.poissonboltzmann.org/apbs/examples/potentials-of-mean-force/the-polar-solvation-potential-of-mean-force-for-a-helix-in-a-dielectric-slab-membrane">http://www.poissonboltzmann.org/apbs/examples/potentials-of-mean-force/the-polar-solvation-potential-of-mean-force-for-a-helix-in-a-dielectric-slab-membrane</a>
and modified (see <tt class="docutils literal"><span class="pre">src/drawmembrane/draw_membrane2a.c</span></tt> in the BornProfiler distribution).</p>
<dl class="class">
<dt id="bornprofiler.membrane.APBSmem">
<em class="property">class </em><tt class="descclassname">bornprofiler.membrane.</tt><tt class="descname">APBSmem</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/bornprofiler/membrane.html#APBSmem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bornprofiler.membrane.APBSmem" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the apbsmem tools.</p>
<p>Run for S, M, and L grid (change suffix).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">see code for kwargs</p>
</div>
<dl class="method">
<dt id="bornprofiler.membrane.APBSmem.generate">
<tt class="descname">generate</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/bornprofiler/membrane.html#APBSmem.generate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bornprofiler.membrane.APBSmem.generate" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup solvation calculation.</p>
<ol class="arabic simple">
<li>create exclusion maps (runs apbs)</li>
<li>create membrane maps (drawmembrane)</li>
<li>create apbs run input file</li>
</ol>
</dd></dl>

<dl class="attribute">
<dt id="bornprofiler.membrane.APBSmem.vars">
<tt class="descname">vars</tt><em class="property"> = None</em><a class="headerlink" href="#bornprofiler.membrane.APBSmem.vars" title="Permalink to this definition">¶</a></dt>
<dd><p>&#8220;static&#8221; variables required for a  calculation</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="bornprofiler.membrane.BornAPBSmem">
<em class="property">class </em><tt class="descclassname">bornprofiler.membrane.</tt><tt class="descname">BornAPBSmem</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/bornprofiler/membrane.html#BornAPBSmem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bornprofiler.membrane.BornAPBSmem" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to prepare a single window in a manual focusing run.</p>
<dl class="method">
<dt id="bornprofiler.membrane.BornAPBSmem.generate">
<tt class="descname">generate</tt><big>(</big><em>run=False</em><big>)</big><a class="reference internal" href="../_modules/bornprofiler/membrane.html#BornAPBSmem.generate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bornprofiler.membrane.BornAPBSmem.generate" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup solvation calculation.</p>
<p>If <em>run</em> = <tt class="docutils literal"><span class="pre">True</span></tt> then runs <strong class="program">apbs</strong> and
<strong class="program">draw_membrane2</strong> (which can take a few minutes); otherwise
just generate scripts (default).</p>
<dl class="docutils">
<dt><em>run</em> = <tt class="docutils literal"><span class="pre">True</span></tt></dt>
<dd><ol class="first last arabic simple">
<li>create exclusion maps (runs <strong class="program">apbs</strong> through <tt class="xref py py-meth docutils literal"><span class="pre">run_apbs()</span></tt>)</li>
<li>create membrane maps (<strong class="program">draw_membrane2a</strong> through
<tt class="xref py py-meth docutils literal"><span class="pre">run_drawmembrane2()</span></tt>)</li>
<li>create apbs run input file</li>
</ol>
</dd>
<dt><em>run</em> = <tt class="docutils literal"><span class="pre">False</span></tt></dt>
<dd><ol class="first last arabic simple">
<li>write a bash script that calls <strong class="program">apbs</strong> and <strong class="program">draw_membrane2</strong>
and which can be integrated into a window run script for parallelization.</li>
<li>create apbs run input file</li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="bornprofiler.membrane.BornAPBSmem.suffices">
<tt class="descname">suffices</tt><em class="property"> = ('L', 'M', 'S')</em><a class="headerlink" href="#bornprofiler.membrane.BornAPBSmem.suffices" title="Permalink to this definition">¶</a></dt>
<dd><p>Suffices of file names are hard coded in templates and should not
be changed; see <tt class="docutils literal"><span class="pre">templates/mdummy.in</span></tt> and <tt class="docutils literal"><span class="pre">templates/mplaceion.in</span></tt>.
The order of the suffices corresponds to the sequence in the schedule.</p>
</dd></dl>

<dl class="attribute">
<dt id="bornprofiler.membrane.BornAPBSmem.vars">
<tt class="descname">vars</tt><em class="property"> = None</em><a class="headerlink" href="#bornprofiler.membrane.BornAPBSmem.vars" title="Permalink to this definition">¶</a></dt>
<dd><p>&#8220;static&#8221; variables required for generating a file from a template;
The variable names can be found in self.__dict__</p>
</dd></dl>

</dd></dl>

<dl class="data">
<dt id="bornprofiler.membrane.TEMPLATES">
<tt class="descclassname">bornprofiler.membrane.</tt><tt class="descname">TEMPLATES</tt><em class="property"> = {'dummy': '# APBS: write coefficient maps\n# (based on APBSmem-generated output)\nread\n    mol pqr &quot;%(pqr)s&quot;\nend\n\nelec name solv0\n    mg-dummy\n    dime %(DIME_XYZ)s\n    glen %(GLEN_XYZ)s\n    lpbe\n    pdie %(pdie)f\n    sdie %(sdie)f\n    bcfl zero\n    ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n    ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n    gcent mol 1\n    mol 1\n    chgm spl2\n    srfm mol\n    srad 1.4\n    swin 0.3\n    sdens 10\n    temp %(temperature)f\n    calcenergy no\n    calcforce no\n    write dielx %(dxformat)s dielx%(suffix)s\n    write diely %(dxformat)s diely%(suffix)s\n    write dielz %(dxformat)s dielz%(suffix)s\n    write kappa %(dxformat)s kappa%(suffix)s\n    write charge %(dxformat)s charge%(suffix)s\nend\n\nquit\n', 'solvation': '# APBS input file\n# calculate the potential for a system embedded in a membrane\n\nread\n    mol pqr &quot;%(pqr)s&quot;\n    # Read Maps\n    diel %(dxformat)s dielx%(suffix)sm.%(dxsuffix)s diely%(suffix)sm.%(dxsuffix)s dielz%(suffix)sm.%(dxsuffix)s\n    kappa %(dxformat)s kappa%(suffix)sm.%(dxsuffix)s\n    charge %(dxformat)s charge%(suffix)sm.%(dxsuffix)s\nend\n\nelec name bulksolvent\n    mg-manual\n    dime %(DIME_XYZ)s\n    glen %(GLEN_XYZ)s\n    lpbe\n    pdie %(pdie)f\n    sdie %(sdie)f\n    bcfl sdh\n    ion charge  1  conc %(conc)f  radius 0.95  # sodium\n    ion charge -1  conc %(conc)f  radius 1.81  # chloride\n    gcent mol 1\n    mol 1\n    chgm spl2\n    srfm mol\n    srad 1.4\n    swin 0.3\n    sdens 10\n    temp %(temperature)f\n    calcenergy total\n    calcforce no\n    write pot dx pot_bulksolvent%(suffix)s\nend\n\nelec name membrane\n    mg-manual\n    dime %(DIME_XYZ)s\n    glen %(GLEN_XYZ)s\n    lpbe\n    pdie %(pdie)f\n    sdie %(sdie)f\n    bcfl sdh\n    ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n    ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n    gcent mol 1\n    mol 1\n    chgm spl2\n    srfm mol\n    srad 1.4\n    swin 0.3\n    sdens 10\n    temp %(temperature)f\n    calcenergy total\n    calcforce no\n    usemap diel 1\n    usemap kappa 1\n    usemap charge 1\n    write pot dx pot_membrane%(suffix)s\nend\n\nprint elecEnergy membrane - bulksolvent\nend\n\nquit\n', 'born_dummy': '# APBS: write coefficient maps \n# Coefficient maps for Born profile calculations\n# Build maps for three focusing steps of a Born profile calculation\n# Map names are hard coded. Writing/reading of dxformat=gz requires\n# APBS version &gt;= 1.3 and draw_membrane2a\n\nREAD\n   mol pqr %(protein_pqr)s\n   mol pqr %(ion_pqr)s\n   mol pqr %(complex_pqr)s\nEND\n\n#------------------------------------------------------------\n# Protein alone (mol 1)\n#------------------------------------------------------------\n#\n# focusing step (1): whole system\nELEC name protein_L\n  mg-dummy\n  mol 1\n  dime %(DIME_XYZ_L)s\n  nlev 4\n  glen %(GLEN_XYZ_L)s\n  gcent mol 1\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl zero\n  pdie %(pdie).2f\n  sdie %(sdie).2f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy no\n  calcforce no\n  write dielx %(dxformat)s dielx_prot_L\n  write diely %(dxformat)s diely_prot_L\n  write dielz %(dxformat)s dielz_prot_L\n  write kappa %(dxformat)s kappa_prot_L\n  write charge %(dxformat)s charge_prot_L\nEND\n\n# focus but now center on ion position (mol 2)\n# and use potential from boundary of previous calc (bcfl focus)\nELEC name protein_M\n  mg-dummy\n  mol 1\n  dime %(DIME_XYZ_M)s\n  nlev 4\n  glen %(GLEN_XYZ_M)s\n  gcent mol 2\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl focus\n  pdie %(pdie).2f\n  sdie %(sdie).2f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy no\n  calcforce no\n  write dielx %(dxformat)s dielx_prot_M\n  write diely %(dxformat)s diely_prot_M\n  write dielz %(dxformat)s dielz_prot_M\n  write kappa %(dxformat)s kappa_prot_M\n  write charge %(dxformat)s charge_prot_M\nEND\n\nELEC name protein_S\n  mg-dummy\n  mol 1\n  dime %(DIME_XYZ_S)s\n  nlev 4\n  glen %(GLEN_XYZ_S)s\n  gcent mol 2\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl focus\n  pdie %(pdie).2f\n  sdie %(sdie).2f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy no\n  calcforce no\n  write dielx %(dxformat)s dielx_prot_S\n  write diely %(dxformat)s diely_prot_S\n  write dielz %(dxformat)s dielz_prot_S\n  write kappa %(dxformat)s kappa_prot_S\n  write charge %(dxformat)s charge_prot_S\nEND\n\n#------------------------------------------------------------\n# Complex protein+ion (mol 3)\n#------------------------------------------------------------\n#\n# Uses own set of maps\n# focusing step (1): whole system\nELEC name complex_L\n  mg-dummy\n  mol 3\n  dime %(DIME_XYZ_L)s\n  nlev 4\n  glen %(GLEN_XYZ_L)s\n  gcent mol 1\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl zero\n  pdie %(pdie).2f\n  sdie %(sdie).2f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy no\n  calcforce no\n  write dielx %(dxformat)s dielx_cpx_L\n  write diely %(dxformat)s diely_cpx_L\n  write dielz %(dxformat)s dielz_cpx_L\n  write kappa %(dxformat)s kappa_cpx_L\n  write charge %(dxformat)s charge_cpx_L\nEND\n\n# focus but now center on ion position (mol 2)\nELEC name complex_M\n  mg-dummy\n  mol 3\n  dime %(DIME_XYZ_M)s\n  nlev 4\n  glen %(GLEN_XYZ_M)s\n  gcent mol 2\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl focus\n  pdie %(pdie).2f\n  sdie %(sdie).2f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy no\n  calcforce no\n  write dielx %(dxformat)s dielx_cpx_M\n  write diely %(dxformat)s diely_cpx_M\n  write dielz %(dxformat)s dielz_cpx_M\n  write kappa %(dxformat)s kappa_cpx_M\n  write charge %(dxformat)s charge_cpx_M\nEND\n\nELEC name complex_S\n  mg-dummy\n  mol 3\n  dime %(DIME_XYZ_S)s\n  nlev 4\n  glen %(GLEN_XYZ_S)s\n  gcent mol 2\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl focus\n  pdie %(pdie).2f\n  sdie %(sdie).2f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy no\n  calcforce no\n  write dielx %(dxformat)s dielx_cpx_S\n  write diely %(dxformat)s diely_cpx_S\n  write dielz %(dxformat)s dielz_cpx_S\n  write kappa %(dxformat)s kappa_cpx_S\n  write charge %(dxformat)s charge_cpx_S\nEND\n\n', 'born_setup_script': '#!/bin/bash\n# Generate dielectric/kappa/charge files with membrane inserted.\n# Requires a customized version \'draw_membrane2a\' (can be found in the BornProfiler\n# distribution in \'src/drawmembrane/draw_membrane2a.c\')\n# Written by bornprofiler.membrane instead of MPlaceion.run_drawmembrane()\n# :Author: Oliver Beckstein &lt;oliver.beckstein&#64;bioch.ox.ac.uk&gt;\n# :Year: 2010-2011\n# :Licence: This file is placed in the Public Domain.\n\n# can be set in the environment\n: ${APBS:=apbs}\n: ${DRAW_MEMBRANE2A:=draw_membrane2a}\n\n# set by the BornProfiler scripts\nDUMMY_IN=%(born_dummy_in)r\nDUMMY_OUT=%(born_dummy_out)r\nINFICES=&quot;%(infices)s&quot;\n\nfunction die () {\n    echo &quot;ERROR: $1&quot;;\n    exit ${2:-};\n}\n\nfunction checkfile () {\n    test -e &quot;$1&quot; || die &quot;File $1 does not exist.&quot; 2;\n}\n\nfunction run_apbs () {\n    local infile=&quot;$1&quot; outfile=&quot;$2&quot;\n    local targets\n    targets=$(ls {dielx,diely,dielz,kappa,charge}*[LMS].dx* 2&gt;/dev/null)\n    if [ $(echo $targets | wc -w) -eq 30 ]; then\n\techo &quot;APBS-generated diel/kappa/charge dx already exist ... skipping run_apbs(\'born_dummy\')&quot;\n\treturn\n    else\n\techo &quot;Running ${APBS} ${infile} ... [run_apbs(\'born_dummy\')]&quot;\n\t${APBS} &quot;${infile}&quot; 2&gt;&amp;1 | tee &quot;${outfile}&quot; \\\n\t    || die &quot;${APBS} ${infile} failed.&quot;\n    fi\n}\n\nfunction run_drawmembrane () {\n    # all draw_membrane interpolations are done here!\n    local infix=$1 compression=&quot;%(dxformat)s&quot;\n    local targets compress_option=&quot;&quot;\n    targets=$(ls {dielx,diely,dielz,kappa,charge}${infix}m.dx* 2&gt;/dev/null)\n    if [ $(echo $targets | wc -w) -eq 5 ]; then\n\techo &quot;Files for $infix already exist .. skipping&quot;\n\treturn\n    fi\n    if [ &quot;$compression&quot; == &quot;gz&quot; ]; then\n\tcompress_option=&quot;-Z&quot;\n    fi\n    ${DRAW_MEMBRANE2A} $compress_option -z %(zmem)f -d %(lmem)f \\\n\t-p %(pdie)f -s %(sdie)f -m %(mdie)f  \\\n\t-R %(Rtop)f -r %(Rbot)f -X %(x0_R)f -Y %(y0_R)f -c %(cdie)s  \\\n\t-a %(headgroup_l)f -i %(headgroup_die)f \\\n\t-V %(Vmem)f -I %(conc)f   $infix \\\n\t|| die &quot;${DRAW_MEMBRANE2A} $infix failed.&quot;\n}    \n\necho &quot;------------------------------------------------------------&quot;\necho &quot;Generating dx files with membrane&quot;\necho &quot;------------------------------------------------------------&quot;\necho &quot;APBS = ${APBS}&quot;\necho &quot;draw_membrane2a = ${DRAW_MEMBRANE2A}&quot;\n\ncheckfile &quot;${DUMMY_IN}&quot;\nrun_apbs &quot;${DUMMY_IN}&quot; &quot;${DUMMY_OUT}&quot;\n\necho &quot;Running ${DRAW_MEMBRANE2A} ... [run_drawmembrane()]&quot;\nfor infix in ${INFICES}; do\n    run_drawmembrane $infix\ndone\n\necho &quot;Generated all membrane files required for running the window.&quot;\nexit 0\n', 'with_protein': '# APBS input file generated by placeion.py\n# for the complex and the ion\n# %(comment)s\n# Uses a membrane and manual focusing in three steps.\n\nREAD\n   # molecules\n   mol pqr %(protein_pqr)s\n   mol pqr %(ion_pqr)s\n   mol pqr %(complex_pqr)s\n\n   # NOTE: APBS 1.3 has a bug that prevents _reading_ of gzipped files \n   #       so they need to be unzipped manually\n     \n   # maps for protein only\n   diel %(dxformat)s dielx_prot_Lm.%(dxsuffix)s diely_prot_Lm.%(dxsuffix)s dielz_prot_Lm.%(dxsuffix)s\n   diel %(dxformat)s dielx_prot_Mm.%(dxsuffix)s diely_prot_Mm.%(dxsuffix)s dielz_prot_Mm.%(dxsuffix)s\n   diel %(dxformat)s dielx_prot_Sm.%(dxsuffix)s diely_prot_Sm.%(dxsuffix)s dielz_prot_Sm.%(dxsuffix)s\n\n   kappa %(dxformat)s kappa_prot_Lm.%(dxsuffix)s\n   kappa %(dxformat)s kappa_prot_Mm.%(dxsuffix)s\n   kappa %(dxformat)s kappa_prot_Sm.%(dxsuffix)s\n\n   charge %(dxformat)s charge_prot_Lm.%(dxsuffix)s\n   charge %(dxformat)s charge_prot_Mm.%(dxsuffix)s\n   charge %(dxformat)s charge_prot_Sm.%(dxsuffix)s\n\n   # maps for complex\n   diel %(dxformat)s dielx_cpx_Lm.%(dxsuffix)s diely_cpx_Lm.%(dxsuffix)s dielz_cpx_Lm.%(dxsuffix)s\n   diel %(dxformat)s dielx_cpx_Mm.%(dxsuffix)s diely_cpx_Mm.%(dxsuffix)s dielz_cpx_Mm.%(dxsuffix)s\n   diel %(dxformat)s dielx_cpx_Sm.%(dxsuffix)s diely_cpx_Sm.%(dxsuffix)s dielz_cpx_Sm.%(dxsuffix)s\n\n   kappa %(dxformat)s kappa_cpx_Lm.%(dxsuffix)s\n   kappa %(dxformat)s kappa_cpx_Mm.%(dxsuffix)s\n   kappa %(dxformat)s kappa_cpx_Sm.%(dxsuffix)s\n\n   charge %(dxformat)s charge_cpx_Lm.%(dxsuffix)s\n   charge %(dxformat)s charge_cpx_Mm.%(dxsuffix)s\n   charge %(dxformat)s charge_cpx_Sm.%(dxsuffix)s\nEND\n\n# Focus each calculation in three steps\n\n#------------------------------------------------------------\n# Protein alone (mol 1)\n#------------------------------------------------------------\n#\n# focusing step (1): whole system\nELEC name protein_L\n  mg-manual\n  mol 1\n  dime %(DIME_XYZ_L)s\n  glen %(GLEN_XYZ_L)s\n  gcent mol 1\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl zero\n  pdie %(pdie)f\n  sdie %(sdie)f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy total\n  calcforce no\n  usemap diel 1\n  usemap kappa 1\n  usemap charge 1\nEND\n\n# focus but now center on ion position (mol 2)\n# and use potential from boundary of previous calc (bcfl focus)\nELEC name protein_M\n  mg-manual\n  mol 1\n  dime %(DIME_XYZ_M)s\n  glen %(GLEN_XYZ_M)s\n  gcent mol 2\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl focus\n  pdie %(pdie)f\n  sdie %(sdie)f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy total\n  calcforce no\n  usemap diel 2\n  usemap kappa 2\n  usemap charge 2\nEND\n\nELEC name protein_S\n  mg-manual\n  mol 1\n  dime %(DIME_XYZ_S)s\n  glen %(GLEN_XYZ_S)s\n  gcent mol 2\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl focus\n  pdie %(pdie)f\n  sdie %(sdie)f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy total\n  calcforce no\n  usemap diel 3\n  usemap kappa 3\n  usemap charge 3\nEND\n\n#------------------------------------------------------------\n# Ion in solvent (mol 2)\n#------------------------------------------------------------\n#\n# focusing step (1): whole system\n# (note: no membrane because the reference state for our Born\n# ion is the aqueous phase).\nELEC name ion_L\n  mg-manual\n  mol 2\n  dime %(DIME_XYZ_L)s\n  glen %(GLEN_XYZ_L)s\n  gcent mol 1\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl zero\n  pdie %(pdie)f\n  sdie %(sdie)f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy total\n  calcforce no\nEND\n\n# focus but now center on ion position (mol 2)\n# and use potential from boundary of previous calc (bcfl focus)\nELEC name ion_M\n  mg-manual\n  mol 2\n  dime %(DIME_XYZ_M)s\n  glen %(GLEN_XYZ_M)s\n  gcent mol 2\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl focus\n  pdie %(pdie)f\n  sdie %(sdie)f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy total\n  calcforce no\nEND\n\nELEC name ion_S\n  mg-manual\n  mol 2\n  dime %(DIME_XYZ_S)s\n  glen %(GLEN_XYZ_S)s\n  gcent mol 2\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl focus\n  pdie %(pdie)f\n  sdie %(sdie)f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy total\n  calcforce no\nEND\n\n\n#------------------------------------------------------------\n# Complex protein+ion (mol 3)\n#------------------------------------------------------------\n#\n# Uses own set of maps\n# focusing step (1): whole system\nELEC name complex_L\n  mg-manual\n  mol 3\n  dime %(DIME_XYZ_L)s\n  glen %(GLEN_XYZ_L)s\n  gcent mol 1\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl zero\n  pdie %(pdie)f\n  sdie %(sdie)f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy total\n  calcforce no\n  usemap diel 4\n  usemap kappa 4\n  usemap charge 4\nEND\n\n# focus but now center on ion position (mol 2)\n# and use potential from boundary of previous calc (bcfl focus)\nELEC name complex_M\n  mg-manual\n  mol 3\n  dime %(DIME_XYZ_M)s\n  nlev 4\n  glen %(GLEN_XYZ_M)s\n  gcent mol 2\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl focus\n  pdie %(pdie)f\n  sdie %(sdie)f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy total\n  calcforce no\n  usemap diel 5\n  usemap kappa 5\n  usemap charge 5\nEND\n\nELEC name complex_S\n  mg-manual\n  mol 3\n  dime %(DIME_XYZ_S)s\n  glen %(GLEN_XYZ_S)s\n  gcent mol 2\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl focus\n  pdie %(pdie)f\n  sdie %(sdie)f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy total\n  calcforce no\n  usemap diel 6\n  usemap kappa 6\n  usemap charge 6\nEND\n\n\n# Born free energy from the focused potentials\nPRINT elecEnergy complex_S - ion_S - protein_S END\nQUIT\n\n', 'memonly': '# APBS input file generated by placeion.py\n# only for the ion (see example/parsegian) --- uses a neutral &quot;fakeprotein&quot;\n# %(comment)s\n# Uses a membrane and manual focusing in three steps.\n\nREAD\n   # molecules\n   # the protein is required to anchor the system; it is only\n   # used for its position and thus can be a single atom\n   # (This is a hack in order to be able to use the Membrane\n   # BornProfiler scripts which always want a protein; when doing\n   # things manually one could remove it and \'gcent\' on the complex)\n   mol pqr %(protein_pqr)s\n   mol pqr %(ion_pqr)s\n   mol pqr %(complex_pqr)s\n\n   # NOTE: APBS 1.3 has a bug that prevents _reading_ of gzipped files \n   #       so they need to be unzipped manually\n     \n   # maps for complex\n   diel %(dxformat)s dielx_cpx_Lm.%(dxsuffix)s diely_cpx_Lm.%(dxsuffix)s dielz_cpx_Lm.%(dxsuffix)s\n   diel %(dxformat)s dielx_cpx_Mm.%(dxsuffix)s diely_cpx_Mm.%(dxsuffix)s dielz_cpx_Mm.%(dxsuffix)s\n   diel %(dxformat)s dielx_cpx_Sm.%(dxsuffix)s diely_cpx_Sm.%(dxsuffix)s dielz_cpx_Sm.%(dxsuffix)s\n\n   kappa %(dxformat)s kappa_cpx_Lm.%(dxsuffix)s\n   kappa %(dxformat)s kappa_cpx_Mm.%(dxsuffix)s\n   kappa %(dxformat)s kappa_cpx_Sm.%(dxsuffix)s\n\n   charge %(dxformat)s charge_cpx_Lm.%(dxsuffix)s\n   charge %(dxformat)s charge_cpx_Mm.%(dxsuffix)s\n   charge %(dxformat)s charge_cpx_Sm.%(dxsuffix)s\nEND\n\n# Focus each calculation in three steps\n\n\n#------------------------------------------------------------\n# Ion in solvent (mol 2)\n#------------------------------------------------------------\n#\n# focusing step (1): whole system\n# (note: no membrane because the reference state for our Born\n# ion is the aqueous phase).\nELEC name ion_L\n  mg-manual\n  mol 2\n  dime %(DIME_XYZ_L)s\n  glen %(GLEN_XYZ_L)s\n  gcent mol 1\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl zero\n  pdie %(pdie)f\n  sdie %(sdie)f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy total\n  calcforce no\nEND\n\n# focus but now center on ion position (mol 2)\n# and use potential from boundary of previous calc (bcfl focus)\nELEC name ion_M\n  mg-manual\n  mol 2\n  dime %(DIME_XYZ_M)s\n  glen %(GLEN_XYZ_M)s\n  gcent mol 2\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl focus\n  pdie %(pdie)f\n  sdie %(sdie)f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy total\n  calcforce no\nEND\n\nELEC name ion_S\n  mg-manual\n  mol 2\n  dime %(DIME_XYZ_S)s\n  glen %(GLEN_XYZ_S)s\n  gcent mol 2\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl focus\n  pdie %(pdie)f\n  sdie %(sdie)f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy total\n  calcforce no\nEND\n\n\n#------------------------------------------------------------\n# Complex ion in membrane (mol 3)\n#------------------------------------------------------------\n#\n# Uses own set of maps\n# focusing step (1): whole system\nELEC name complex_L\n  mg-manual\n  mol 3\n  dime %(DIME_XYZ_L)s\n  glen %(GLEN_XYZ_L)s\n  gcent mol 1\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl zero\n  pdie %(pdie)f\n  sdie %(sdie)f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy total\n  calcforce no\n  usemap diel 1\n  usemap kappa 1\n  usemap charge 1\nEND\n\n# focus but now center on ion position (mol 2)\n# and use potential from boundary of previous calc (bcfl focus)\nELEC name complex_M\n  mg-manual\n  mol 3\n  dime %(DIME_XYZ_M)s\n  nlev 4\n  glen %(GLEN_XYZ_M)s\n  gcent mol 2\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl focus\n  pdie %(pdie)f\n  sdie %(sdie)f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy total\n  calcforce no\n  usemap diel 2\n  usemap kappa 2\n  usemap charge 2\nEND\n\nELEC name complex_S\n  mg-manual\n  mol 3\n  dime %(DIME_XYZ_S)s\n  glen %(GLEN_XYZ_S)s\n  gcent mol 2\n  # NaCl ionic strength in mol/L\n  ion  charge  1   conc %(conc).2f  radius 0.95   # sodium ions\n  ion  charge -1   conc %(conc).2f  radius 1.81   # chloride ions\n  lpbe\n  bcfl focus\n  pdie %(pdie)f\n  sdie %(sdie)f\n  srfm mol\n  chgm spl2\n  srad 1.4\n  swin 0.3\n  sdens 10.0\n  temp %(temperature).2f\n  calcenergy total\n  calcforce no\n  usemap diel 3\n  usemap kappa 3\n  usemap charge 3\nEND\n\n\n# Born free energy from the focused potentials\nPRINT elecEnergy complex_S - ion_S END\nQUIT\n\n'}</em><a class="headerlink" href="#bornprofiler.membrane.TEMPLATES" title="Permalink to this definition">¶</a></dt>
<dd><p>cache for template files</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/developers/membrane.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">BornProfiler 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Lennard van der Feltz, Kaihsu Tai, Oliver Beckstein.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>